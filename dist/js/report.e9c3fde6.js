(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["report"],{"10ec":function(e,t,s){},"762c":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"report-content"},[s("div",{staticClass:"container-fluid"},[s("start-report")],1)])},a=[],i=(s("97be"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"all-questions"},[e.loading?s("div",{staticClass:"title-question"},[e._v(e._s(e.$t("loading")))]):s("div",{staticClass:"content-questions"},[s("div",{attrs:{id:"report-container"}},[e._l(e.questions,(function(t,n){return s("div",{key:n,staticClass:"question"},[s("div",{staticClass:"title-question"},[e._v(e._s(e.$t(t.i18n))+" ")]),"select"===t.type?s("div",{staticClass:"type-question"},[s("div",{staticClass:"options",class:t.type},e._l(t.options,(function(n,a){return s("div",{staticClass:"option",class:{"is-large-text":n.label.length>4,active:n.value===t.value},on:{click:function(s){return e.setValue(t,n.value)}}},[e._v(e._s(e.$t(n.i18n)))])})),0)]):e._e(),"checkbox"===t.type?s("div",{staticClass:"type-question"},[s("div",{staticClass:"options",class:t.type},e._l(t.options,(function(n,a){return s("div",{staticClass:"field"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"question.value"}],staticClass:"is-checkradio",attrs:{id:"check-"+t.id+a,type:"checkbox"},domProps:{value:n.id,checked:Array.isArray(t.value)?e._i(t.value,n.id)>-1:t.value},on:{change:function(s){var a=t.value,i=s.target,o=!!i.checked;if(Array.isArray(a)){var r=n.id,c=e._i(a,r);i.checked?c<0&&e.$set(t,"value",a.concat([r])):c>-1&&e.$set(t,"value",a.slice(0,c).concat(a.slice(c+1)))}else e.$set(t,"value",o)}}}),s("label",{attrs:{for:"check-"+t.id+a}},[e._v(e._s(e.$t(n.i18n)))])])})),0)]):e._e(),e.checkTypeString(t.type)?s("div",{staticClass:"type-question"},["checkbox"===t.type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"question.value"}],attrs:{placeholder:"Type here...",type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.next(t)},change:function(s){var n=t.value,a=s.target,i=!!a.checked;if(Array.isArray(n)){var o=null,r=e._i(n,o);a.checked?r<0&&e.$set(t,"value",n.concat([o])):r>-1&&e.$set(t,"value",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(t,"value",i)}}}):"radio"===t.type?s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"question.value"}],attrs:{placeholder:"Type here...",type:"radio"},domProps:{checked:e._q(t.value,null)},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.next(t)},change:function(s){return e.$set(t,"value",null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"question.value"}],attrs:{placeholder:"Type here...",type:t.type},domProps:{value:t.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.next(t)},input:function(s){s.target.composing||e.$set(t,"value",s.target.value)}}})]):e._e(),"textarea"===t.type?s("div",{staticClass:"type-question",model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"question.value"}},[s("textarea",{attrs:{placeholder:"Type here..."}})]):e._e()])})),s("div",{staticClass:"question"},[e.sending?s("div",{staticClass:"title-question"},[e._v(e._s(e.$t("sending")))]):s("div",{staticClass:"send"},[s("div",{staticClass:"title-question"},[e._v(e._s(e.$t("thanksMessage")))]),s("div",{staticClass:"content-button-nav full"},[s("button",{on:{click:e.handleReport}},[e._v(e._s(e.$t("backButton")))])])])])],2),!e.sended&&e.step<5?s("div",{staticClass:"content-button-nav"},[s("button",{attrs:{disabled:e.step<=1},on:{click:e.prev}},[e._v(e._s(e.$t("prevButton")))]),s("button",{on:{click:e.next}},[e._v(e._s(e.$t("nextButton")))])]):e._e()])])}),o=[],r=(s("7db0"),s("4160"),s("159b"),s("5530")),c=(s("cbf4"),s("10ec"),s("bc3a")),u=s.n(c),l=s("2ef0"),d=s.n(l),p=s("a5cf"),v=s("2f62"),h={data:function(){return{newCurve:null,questions:[],step:1,sended:!1,user_report:{answer:[],lat:"",long:""},loading:!0,sending:!1}},computed:Object(r["a"])({stepsLeft:function(){return this.questions.length}},Object(v["b"])(["getCurve"])),methods:{checkTypeString:function(e){switch(e){case"text":case"number":case"email":case"tel":return!0;default:return!1}},setValue:function(e,t){e.value=t,this.next()},getQuestions:function(){var e=this;u.a.get("https://api.covtraca.org/v1/questions").then((function(t){e.questions=t.data.data,d.a.forEach(e.questions,(function(e){"checkbox"==e.type?e["value"]=[]:e["value"]="";var t=JSON.parse(e.options);e.options=t})),e.loading=!1}))},sendReport:function(){var e=this;e.sending=!0,d.a.forEach(e.questions,(function(t){e.user_report.answer.push({id:t.id,value:t.value})}));var t=JSON.stringify(e.user_report.answer);e.user_report.answer=t,u.a.post("https://api.covtraca.org/v1/reports",e.user_report).then((function(){e.sended=!0})).then((function(e){console.log(e)})).then((function(){e.sending=!1}))},handleReport:function(){this.$store.dispatch("handleReport"),this.$router.push("/")},prev:function(){var e=this;e.step>1&&(e.step--,document.getElementById("report-container").style.transform="translateX(calc(-100% * ".concat(e.step-1,")"))},next:function(){var e=this,t=null;void 0==e.step||3!=e.step&&4!=e.step||(t=d.a.find(e.questions,(function(e){return"isTested"==e.state_name}))),e.step<e.stepsLeft?(t&&!t.value&&e.step++,e.step++,document.getElementById("report-container").style.transform="translateX(calc(-100% * ".concat(e.step-1,")")):(e.step++,e.sendReport(),document.getElementById("report-container").style.transform="translateX(calc(-100% * ".concat(e.step-1,")"))},getLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(e.showPosition,e.showError):(e.$store.dispatch("handleToast"),this.$store.dispatch("setMessage","Geolocation is not supported by this browser."),setTimeout((function(){e.$store.dispatch("handleToast")}),5e3))},showError:function(e){var t=this,s="";switch(t.$store.dispatch("handleToast"),e.code){case e.PERMISSION_DENIED:s="permissionDenied";break;case e.POSITION_UNAVAILABLE:s="positionUnavailable";break;case e.TIMEOUT:s="timeout";break;case e.UNKNOWN_ERROR:s="unknownError";break}this.$store.dispatch("changeMessage",{message:s}),setTimeout((function(){t.$store.dispatch("handleToast")}),5e3)},showPosition:function(e){var t=this;t.user_report.lat=e.coords.latitude,t.user_report.long=e.coords.longitude}},mounted:function(){window.innerWidth>1023&&(this.getCurve.pause(),this.newCurve=new p["d"],this.newCurve.to(".curve",1,{left:"-70%",top:"-50%",scale:3,ease:p["b"].ease})),this.getQuestions(),this.getLocation()},destroyed:function(){var e=this,t="-7%",s="-40%";window.innerWidth>1023&&(setTimeout((function(){e.getCurve.resume()}),1100),window.innerWidth>=1408&&(s="-42%"),e.newCurve.to(".curve",1,{left:t,top:s,scale:1,ease:p["b"].ease}))}},f=h,y=s("2877"),g=Object(y["a"])(f,i,o,!1,null,null,null),_=g.exports,m={components:{StartReport:_},mounted:function(){this.$store.dispatch("handleReport")}},k=m,b=Object(y["a"])(k,n,a,!1,null,null,null);t["default"]=b.exports},cbf4:function(e,t,s){}}]);
//# sourceMappingURL=report.e9c3fde6.js.map